# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–®–ò–ë–ö–ò GET_CRYPTO_PRICE

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:
```
'SimpleCryptoChecker' object has no attribute 'getcryptoprice'
```

## üîç –ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏

–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤ —Ç–æ–º, —á—Ç–æ:
1. –ú–µ—Ç–æ–¥ –≤ `crypto_checker_simple.py` –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `get_crypto_price`
2. –ù–æ –≤ `render_bot.py` –±—ã–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞
3. –í–æ–∑–º–æ–∂–Ω–æ, –æ–±—ä–µ–∫—Ç `crypto_checker` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è –∫–∞–∫ `None` –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–æ–¥–æ–≤**

**–í —Ñ—É–Ω–∫—Ü–∏–∏ `handle_crypto_deposit_selection`:**
```python
# –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫—É—Ä—Å–∞
current_price = 0
if crypto_checker and hasattr(crypto_checker, 'get_crypto_price'):
    try:
        current_price = crypto_checker.get_crypto_price(coin_id)
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–∞ {coin_id}: {e}")
        # Fallback –∫—É—Ä—Å—ã
        fallback_rates = {
            'solana': 100.0,
            'ethereum': 3000.0,
            'tether': 1.0,
            'usd-coin': 1.0,
        }
        current_price = fallback_rates.get(coin_id, 1.0)
```

### 2. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã**

```python
if crypto_checker and hasattr(crypto_checker, 'wallets') and currency in crypto_checker.wallets:
    wallet_address = crypto_checker.wallets[currency]
    # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã –ø–æ —Ç–µ–∫—É—â–µ–º—É –∫—É—Ä—Å—É
    try:
        crypto_amount = crypto_checker.calculate_crypto_amount(amount, currency)
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ {currency}: {e}")
        # Fallback —Ä–∞—Å—á–µ—Ç
        fallback_rates = {
            'eth': 3000.0,
            'usdt': 1.0,
            'sol': 100.0,
            'usdc_sol': 1.0,
            'usdt_sol': 1.0,
        }
        rate = fallback_rates.get(currency, 1.0)
        crypto_amount = amount / rate if rate > 0 else 0
```

### 3. **–£–ª—É—á—à–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è crypto_checker**

**–í —Ñ—É–Ω–∫—Ü–∏–∏ `main()`:**
```python
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∫—Ä–∏–ø—Ç–æ—á–µ–∫–µ—Ä
global crypto_checker
try:
    crypto_checker = SimpleCryptoChecker()
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º–µ—Ç–æ–¥—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç
    if hasattr(crypto_checker, 'get_crypto_price') and hasattr(crypto_checker, 'calculate_crypto_amount'):
        print("‚úÖ –ö—Ä–∏–ø—Ç–æ—á–µ–∫–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ")
    else:
        print("‚ö†Ô∏è –ö—Ä–∏–ø—Ç–æ—á–µ–∫–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω, –Ω–æ –º–µ—Ç–æ–¥—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã")
        crypto_checker = None
except Exception as e:
    print(f"‚ö†Ô∏è –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫—Ä–∏–ø—Ç–æ—á–µ–∫–µ—Ä–∞: {e}")
    crypto_checker = None
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 1. **–ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
```bash
git add render_bot.py
git commit -m "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å –º–µ—Ç–æ–¥–æ–º get_crypto_price –∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã fallback –∑–Ω–∞—á–µ–Ω–∏—è"
git push
```

### 2. **–î–æ–∂–¥–∏—Ç–µ—Å—å –¥–µ–ø–ª–æ—è –Ω–∞ Render:**
- Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –±–æ—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –∫–Ω–æ–ø–æ–∫ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç

### 3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:**
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –∫–æ—à–µ–ª–µ–∫ –ª—é–±–æ–π –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–æ–π
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å –∫—É—Ä—Å–æ–º
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ fallback –∑–Ω–∞—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç

## üìä –ö–∞–∫ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –º–µ—Ç–æ–¥–æ–≤ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- Fallback –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### 2. **Fallback –∫—É—Ä—Å—ã:**
- SOL: $100
- ETH: $3000
- USDT: $1
- USDC: $1

### 3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
- –ï—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è fallback –∫—É—Ä—Å—ã
- –ï—Å–ª–∏ –º–µ—Ç–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback —Ä–∞—Å—á–µ—Ç
- –í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å –º–µ—Ç–æ–¥–æ–º get_crypto_price
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã fallback –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –†–∞–±–æ—Ç–∞—é—Ç –≤—Å–µ –∫–Ω–æ–ø–∫–∏ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç
- ‚úÖ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫—É—Ä—Å—ã –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API

**–¢–µ–ø–µ—Ä—å –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–æ–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ! üéâ**
